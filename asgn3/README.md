# Assignment 3 directory

This repository contains the code for the following programs: queue and rwlock.

queue.c is an implementation of a thread safe bounded buffer which allows multiple programs running on different threads to communicate with one another. The buffer structure was implemented using a circular queue, in which the location to place new elements is determined by taking the modulus of a constantly increasing variable, and the same for the output location. The thread saftey is implemented using a combination of semaphores and mutexes. The semaphores are used to track the number of spots in our queue that are still empty, and the number of spots that are full. The semaphore that tracks the numbber of spots that are empty will block pop when it's equal to 0, and the number of spots that are full semaphore will block when it's 0, but is initalized to the size of our queue at the start.


rwlock.c provide three different priority systems to solve thread reader-writer problem. The three priorites are Reader, Writer, and NWAY. Reader will block any writers from entering if there are any readers who want to enter the critical region, and Writer does the same but this time the writers do the blocking. NWAY is a little more complex and allows for n readers to enter the critical region before allowing a writer to go(after all of the readers have exited of course). To implement this, pthread conditionals are used to allow the different locks to communicate with one another. THis specific implementation of NWAY's is slightly volatile currently, specifically for the case where n = 1. If n =1, the implementation chosen can lead to an additonal reader entering before the writer goes(seems to be inconsistent if it happens or not), which leads that particular case to not matching the intended behavior. 
